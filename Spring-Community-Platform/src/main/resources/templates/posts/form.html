<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      th:replace="~{layout/layout :: layout(content=~{::content})}">

<th:block th:fragment="content">
    <div class="row justify-content-center">
        <div class="col-lg-9 col-xl-8">

            <div class="mb-4">
                <h2 class="fw-bold text-dark mb-1" style="letter-spacing: -1px;">ìƒˆ ê¸€ ì‘ì„±</h2>
                <p class="text-muted small">ì»¤ë®¤ë‹ˆí‹° ë™ë£Œë“¤ê³¼ ë‚˜ëˆ„ê³  ì‹¶ì€ ì´ì•¼ê¸°ë¥¼ ë“¤ë ¤ì£¼ì„¸ìš”.</p>
            </div>

            <div class="card shadow-sm border-0 rounded-4">
                <div class="card-body p-4 p-md-5">
                    <form th:action="@{/posts}" method="post"
                          onsubmit="if(this.title.value.trim() == '' || this.content.value.trim() == '') { alert('ê³µë°± ì œì™¸, ì œëª©ê³¼ ë‚´ìš©ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”!'); return false; }">

                        <div class="mb-4">
                            <label class="form-label fw-bold text-dark small text-uppercase">Title</label>
                            <input type="text" name="title" id="postTitle"
                                   class="form-control border-0 bg-light py-3 px-4 rounded-3 fw-medium"
                                   placeholder="ì‹œì„ ì„ ì‚¬ë¡œì¡ëŠ” ì œëª©ì„ ì…ë ¥í•´ë³´ì„¸ìš”" 
                                   required
                                   pattern=".*\S.*"
                                   oninvalid="this.setCustomValidity('ê³µë°±ì„ ì œì™¸í•œ ì œëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!')"
                                   oninput="this.setCustomValidity('')">
                        </div>

                        <div class="mb-4">
                            <label class="form-label fw-bold text-dark small text-uppercase">Content</label>
                            <textarea name="content" id="postContent"
                                      class="form-control border-0 bg-light p-4 rounded-3" rows="12"
                                      style="resize: none; line-height: 1.6;"
                                      placeholder="ì—¬ê¸°ì— ë‚´ìš©ì„ ììœ ë¡­ê²Œ ì‘ì„±í•˜ì„¸ìš”..." 
                                      required
                                      oninvalid="this.setCustomValidity('ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!')"
                                      oninput="this.setCustomValidity('')"></textarea>
                        </div>

                        <hr class="my-4 opacity-25">

                        <div class="d-flex justify-content-between align-items-center">
                            <a th:href="@{/posts}"
                               class="btn btn-link text-muted text-decoration-none small">
                                ì‘ì„± ì·¨ì†Œ </a>

                            <div class="d-flex gap-2">
                                <button type="submit"
                                        class="btn btn-primary px-5 py-2 rounded-pill fw-bold shadow-sm">
                                    ë“±ë¡í•˜ê¸°</button>
                            </div>
                        </div>

                    </form>
                </div>
            </div>

            <div class="mt-4 p-3 bg-light rounded-3">
                <p class="text-muted small mb-0 text-center">ğŸ“¢ ê³ ìš´ ë§ì„ ì‚¬ìš©í•˜ë©´ ë” ë”°ëœ»í•œ ì»¤ë®¤ë‹ˆí‹°ê°€ ë©ë‹ˆë‹¤.</p>
            </div>

        </div>
    </div>

    <style>
        .form-control {
            transition: all 0.2s ease-in-out;
            border: 2px solid transparent !important;
        }

        .form-control:focus {
            background-color: #fff !important;
            border: 2px solid #0d6efd !important;
            box-shadow: 0 4px 12px rgba(13, 110, 253, 0.08) !important;
        }

        /* 1. í•„ìˆ˜ê°’ì´ ë¹„ì–´ìˆê±°ë‚˜ patternì— ë§ì§€ ì•Šì„ ë•Œ(ê³µë°±ë§Œ ìˆì„ ë•Œ) í¬ì»¤ìŠ¤ ì‹œ ë¹¨ê°„ìƒ‰ */
        .form-control:invalid:focus {
            border: 2px solid #dc3545 !important;
            box-shadow: 0 4px 12px rgba(220, 53, 69, 0.08) !important;
        }

        /* 2. ì…ë ¥ì´ ì™„ë£Œë˜ì—ˆê³  ìœ íš¨í•  ë•Œ ì´ˆë¡ìƒ‰ í¬ì¸íŠ¸ */
        .form-control:valid:not(:placeholder-shown) {
            border: 2px solid #198754 !important;
        }
    </style>
</th:block>
</html>